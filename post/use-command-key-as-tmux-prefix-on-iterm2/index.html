<html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/images/favicon-16x16.png><title>ggdG:wq! - Commandキーをtmuxのプレフィックスキーとして使う on Iterm2</title><meta content="tmux,iterm2,mac,config,tech" name=keywords><meta content="ggdG:wq! - Commandキーをtmuxのプレフィックスキーとして使う方法" name=description><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="ggdG:wq!"><meta property="og:title" content="ggdG:wq!"><meta property="og:description" content="Commandキーをtmuxのプレフィックスキーとして使う方法"><meta property="og:type" content="website"><meta property="og:url" content="https://ggdg.tkan.dev/post/use-command-key-as-tmux-prefix-on-iterm2/"><meta property="og:image" content="https://ggdg.tkan.dev/images/tn.png??"><meta name=twitter:card content="summary"><meta name=twitter:site content="https://ggdg.tkan.dev/post/use-command-key-as-tmux-prefix-on-iterm2/"><meta name=twitter:image content="https://ggdg.tkan.dev/images/tn.png??"><link rel=stylesheet href=/css/new.css type=text/css><meta name=viewport content="width=device-width,initial-scale=1"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-89403151-6"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','UA-89403151-6');</script></head><body><header><h1>Commandキーをtmuxのプレフィックスキーとして使う on Iterm2</h1><nav><a href=https://ggdg.tkan.dev/>Home</a> /
<a href=https://ggdg.tkan.dev//post>All Posts</a> /
<a href=https://ggdg.tkan.dev//about>About</a></nav></header><div class=container><div id=content style=min-height:80%><p>tmuxのプレフィックスキーに最適なキーを探して数年が経ちました。<br>Vimのキーマップやターミナルのショートカットを考慮するとプレフィックスキーとして使える組み合わせってほぼ残って無いです。<br>(デフォルトのCtrl+aとか、shellでめっちゃ多用します)</p><p>なので色々な組み合わせを試してきたんですが、最近MacだったらCommandキーをプレフィックスキーとして使えば良いのでは？<br>と考えて設定してみたら結構いい感じです。<br>Commandキーをプレフィックスキーとして使うメリットとしては</p><ul><li>押しやすい位置にある</li><li>ターミナルで動くツール(vim, bash, 他CLIツール類)とショートカットでバッティングすることが無い(多分)</li></ul><p>とかが挙がります。<br>親指で押せる位置にあるというのは、ターミナルで生活する者としては結構重要です。<br>小指とかで押すCtrl等をプレフィックスキーとして使用すると小指が死んでしまいます。<br>Commandキー単押しでプレフィックスキーとして動作させることも可能ですし、 <code>Commandキー + '</code> を tmuxのpane分割キーとして設定すること等も可能です。
(これも結構メリット)</p><h2 id=前提>前提</h2><ul><li>下記環境で動作確認を行っています。<ul><li>macOS Catalina バージョン 10.15.5</li><li>iTerm2 Build 3.3.11</li><li>tmux 3.0a</li></ul></li></ul><h2 id=設定方法>設定方法</h2><p>Iterm2にはキーボードショートカットを自分で登録する機能が最初からついてます。<br>ショートカットを入力した際に色々なアクション(スクロールとかコピー等)を実行できるのですが、そんなアクションの中に &ldquo;Send Hex Code&rdquo; というアクションがあります。その名の通りショートカットを入力した際にASCIIコードを送信してくれる機能です。<br>こいつを利用して、Commandキーを入力した際にtmuxのプレフィックスキーとして設定したキーのASCIIコードを送信してもらいます。</p><p>どのキーがASCIIコードの16進数で何に該当するのかは下記サイトとかみると分かります。</p><p>ＡＳＣＩＩコード表: <a href=https://ja.wikipedia.org/wiki/ASCII>https://ja.wikipedia.org/wiki/ASCII</a></p><h3 id=tmux側の設定>tmux側の設定</h3><p>実はtmuxのprefix設定が何でも良いわけじゃないです。(ここが若干デメリット)<br>tmux的には <code>Ctrl-&lt;Space></code> をプレフィックスキーとして使うことが出来るのですが、<br>上記 &ldquo;send Hex Code&rdquo; の機能としては上記ASCIIコード表に載っているような文字もしくは制御文字しか対応していません。</p><p>なので普段使わなさそうな制御文字をプレフィックスキーとして利用します。<br>ASCIIコードの制御文字とその説明はWikipediaみると概要は分かるかと思います。</p><p>Wikipedia 制御文字: <a href=https://ja.wikipedia.org/wiki/%E5%88%B6%E5%BE%A1%E6%96%87%E5%AD%97>https://ja.wikipedia.org/wiki/%E5%88%B6%E5%BE%A1%E6%96%87%E5%AD%97</a></p><p>私は <code>Ctrl + \</code> をtmuxのプレフィックスキーとして設定しました。 (制御文字としては File Separator だそうです。)</p><p><code>.tmux.conf</code> の設定として書くなら下記のようになります。(エスケープするためにバッククォートが2つついてます。)</p><pre><code># prefix key
set -g prefix C-\\
</code></pre><h3 id=iterm2側の設定>Iterm2側の設定</h3><p>次にIterm2側の設定です。 Iterm2のPreferencesから設定します。(Preferencesの開き方は<code>Commandキー + ,</code>)<br>Preferences > Keys > Key Bindings の左下の + ボタンからキーボードショートカットを新しく登録します。</p><p>私の設定を例にすると、</p><ol><li>Preferences > Keys > Key Bindings の左下の + ボタンを押す</li><li>Commandキーの単押しをプレフィックスキーとして使いたいので、 &ldquo;Keyboard Shortcut&rdquo; のところをクリックして Commandキーを押す</li><li>Actionで &ldquo;Send Hex Code&rdquo; を選択する</li><li>Actionの下に入力欄が出るので、そこに先程プレフィックスキーとして設定した制御文字のASCIIコードを入力する<ul><li>(私はFile Separatorをプレフィックスキーとして設定したので、そのASCIIコードである 1c を入力します)</li></ul></li></ol><p>上記設定ができれば下記画像のようになるはずです。</p><p><img src=./hexcode-setting.png alt=Commandキーをプレフィックスキーとして設定できたときの画像></p><p>ここまでで Commandキーをプレフィックスキーとして利用できます。動作確認して終わりです。お疲れさまでした。</p><h3 id=おまけ>おまけ</h3><p>ここまでの設定の応用として、<code>Commandキー + '</code> をプレフィックスキーを押したあとで ' キーを押したと同様の動作(tmuxのデフォルト設定だとpaneの分割) をするようにしてみます。</p><ol><li>Preferences > Keys > Key Bindings の左下の + ボタンを押す</li><li><code>Commandキー + '</code>をプレフィックスキーとして使いたいので、 &ldquo;Keyboard Shortcut&rdquo; のところをクリックして Commandキーを押す</li><li>Actionで &ldquo;Send Hex Code&rdquo; を選択する</li><li>Actionの下に入力欄が出るので、そこに先程プレフィックスキーとして設定した制御文字のASCIIコードを入力し、半角スペースを入れて ' キーのASCIIコード(22) を入力します。<ul><li>(私はFile Separatorをプレフィックスキーとして設定したので、そのASCIIコードである 1c を入力します)</li></ul></li></ol><p>これで <code>Commandキー + '</code> をpane分割のショートカットとして登録できました。<br>この調子でよく使うtmuxの操作をショートカットとして登録すると便利です。私の設定は現在下記画像の様になっていました。</p><p><img src=./hexcode-setting2.png alt=色々設定できたときの画像></p><p>Commandキーをプレフィックスキーとして利用すると小指に優しいのでおすすめです。<br>良かったらぜひ試してみて下さいませ。</p></div></div></body></html>